<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <meta name="theme-color" content="#317EFB">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" href="icons/icon.webp" />
    <link rel="apple-touch-icon" href="icons/icon.webp">

    <title>StarShip Sim</title>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker
                    .register('serviceworker.js')
                    .then(reg => console.log('Service Worker: Registered (Pages)'))
                    .catch(err => console.log(`Service Worker: Error: ${err}`));
            });
        }
    </script>

    <link rel="stylesheet" href="displayComponents/style.css">
    <link rel="stylesheet" href="displayComponents/dispComponents.css">
</head>

<body>
    <canvas id="mainView"></canvas>

    <div id="FlightParamDisp" class="noSelect">
        <div id="FlightParamDispL">
            <p><span id="altitudeDisp" style="font-size: 15px;"></span><span id="altitudeDisp2" style="font-size: 10px;"></span></p>
        </div>


        <div id="MidUpperMenu"
            style="font-size: smaller; display: flex; flex-direction:column;align-items: center;justify-content: center;text-align: center;transition-duration: 0.1s;">

            <div id="FlightParamDispMid" onclick="show_hideFlightParamDispMid()">

                <p class="FlightParamDispMidCell">ToBase: <span id="distanceToLandingSite"></span></p>
                <p class="FlightParamDispMidCell">SpeedX: <span id="speedX"></span></p>
                <p class="FlightParamDispMidCell">SpeedY: <span id="speedY"></span></p>

                <p class="FlightParamDispMidCell">G: <span id="gforece"></span></p>
                <p class="FlightParamDispMidCell">Fuel: <span id="propellantMassDisp"></span>t</p>
                <p class="FlightParamDispMidCell">TWR: <span id="twrDisp"></span></p>

            </div>

            <button id="menuToggle" onclick="show_hideMenuView()"></button>

            <div id="mainViewButtonsArea" style="margin: 10px;">

                <button id="RestartBtn" class="mainPageBtn" onclick="restart()">Restart</button>
                <button id="showPlotViewButton" class="mainPageBtn"
                    style="display: none; background-color: transparent;" onclick="show_hidePlotView()">FDR</button>
                <button id="requestTiltPermissionBtn" class="mainPageBtn">Enable Tilt Control</button>

            </div>
        </div>


        <div id="FlightParamDispR">
            <p><span id="speedDisp" style="font-size: 15px;"></span><span id="speedDisp2" style="font-size: 10px"></span></p> 
        </div>
    </div>

    <div id="flightControl" class="noSelect">
        <div id="controlsL" class="hideableControls"
            style="display: flex;flex-direction: column;align-items: center;justify-content: center;text-align: center; position: absolute; left: 10px; transform: translateX(-100%);">
            <div id="controlsLContent" class="hideableControlsContent" onclick="show_controlsL()">
                <div style="display: grid; grid-template-columns: auto auto auto auto;grid-gap: 1px;padding: 2px;">
                    <input type="range" class="slider" id="throttleControl"
                        style="grid-column-start: 1;grid-column-end: 4;"><br>
                    <button id="raptor1toggle" class="controlBtn" onclick="toggleRaptor1()">R1</button>
                    <button id="raptor2toggle" class="controlBtn" onclick="toggleRaptor2()">R2</button>
                    <button id="raptor3toggle" class="controlBtn" onclick="toggleRaptor3()">R3</button>
                    <button class="controlBtn" id="toggleautoMaxThrust" style="grid-column-start: 1;grid-column-end: 4;"
                        onclick="toggleautoMaxThrust()">MaxSafeThrust</button>
                    <button id="allraptorstoggle" class="controlBtn" onclick="toggleAllRaptors()"
                        style="grid-column-start: 1;grid-column-end: 4;">Toggle-All</button>
                </div>
            </div>
        </div>
        <button class="show_hideToggle" onclick="show_hidecontrolsL()"
            style="position: absolute; bottom: 0px; left: 0px;"></button>

        <div id="controlsR" class="hideableControls"
            style="display: flex;flex-direction: column;align-items: center;justify-content: center;text-align: center; position: absolute; right: 10px;transform: translateX(100%);">
            <div id="controlsRContent" class="hideableControlsContent" onclick="show_controlsR()"
                style="display: flex;flex-direction: column;align-items: flex-end;justify-content: center;text-align: center; ">
                <div id="attitudeControl" style="text-align: center;">
                    <input type="range" class="slider" id="pitchControl" onmouseover="manualPitchControlOn()"
                        onmouseout="recordHoldingPitch_resumeAuto()" ontouchstart="manualPitchControlOn()"
                        ontouchend="recordHoldingPitch_resumeAuto()">
                </div>
                <div style="display: flex;flex-wrap: wrap;">
                    <button class="controlBtn" id="toggleautoTakeOff" onclick="toggleautoTakeOff()">LiftOff</button>
                    <button class="controlBtn" id="toggleBoostBack" onclick="toggleBoostBack()">BoostBack</button>
                </div>
                <div style="display: flex;flex-wrap: wrap;">
                    <button class="controlBtn" id="togglePitchHold" onclick="togglePitchHold()">AttitHold</button>
                    <button class="controlBtn" id="toggleAutoLand" onclick="toggleAutoLand()">AutoLand</button>
                </div>
                <div id="controlToggles" style="display: flex;flex-wrap: wrap;">
                    <button class="controlBtn" id="toggleFin" onclick="toggleFin()">Fins</button>
                    <button class="controlBtn" id="toggleRcs" onclick="toggleRcs()">RCS</button>
                    <button class="controlBtn" id="toggledumpFuel" onclick="toggleDumpFuel()">DumpFuel</button>
                </div>
            </div>
        </div>
        <button class="show_hideToggle" onclick="show_hidecontrolsR()"
            style="position: absolute; bottom: 0px; right: 0px;"></button>
    </div>



    <div id="plotView" class="hiddenFullScreenView" style="display: flex; flex-direction: column;height: 100%;">
        <div id="close_PlotView" style="min-height: 20%;flex: 1;" onclick="show_hidePlotView()"></div>
        <div id="plots" style="backdrop-filter: blur(10px);-webkit-backdrop-filter: blur(10px);">
            <div id="flyPathPlot" class="singlePlotCell"></div>
            <div id="motionSpeedPlot" class="singlePlotCell"></div>
            <div id="propellentRemainingPlot" class="singlePlotCell"></div>
            <div id="accelerationPlot" class="singlePlotCell"></div>
            <div id="motionAnglePlot" class="singlePlotCell"></div>
            <div id="controlInPutPlot" class="singlePlotCell"></div>
            <div id="thermalPower_dynamicPressurePlot" class="singlePlotCell"></div>
            <div id="aerodynamicForcePlot" class="singlePlotCell"></div>
            <div id="altitudePlot" class="singlePlotCell"></div>

        </div>
    </div>

    <div id="menuView" class="hiddenFullScreenView" style="display: flex; flex-direction: column;height: 100%;">
        <div id="close_MenuView" style="min-height: 20%;flex: 1;" onclick="show_hideMenuView()"></div>
        <div id="menuContent"
            style="background-color: rgba(216, 216, 216, 0.548);display: flex; flex-direction: column; padding: 10px; align-items: center;backdrop-filter: blur(10px);-webkit-backdrop-filter: blur(10px);">

            <div id="toggleTiltControlDiv" class="singleFunctionCell">
                <button id="toggleTiltControl" onclick="toggleTiltControl()" class="controlBtn">TiltControl</button>
                <button id="toggleRandomFaliure" onclick="toggleRandomFaliure()"
                    class="controlBtn">RandomFaliure</button>
            </div>

            <p class="functionTitle">TimeWarp</p>

            <div id="timeAcc" class="singleFunctionCell"
                style="display: flex; align-items: center; flex-wrap: wrap;justify-content: space-around;">
                <button id="timeAccState" class="controlBtn" onclick="toggleTimeAccState()">Speed Things Up</button>

                <div style="display: flex; align-items: center; flex-wrap: wrap;justify-content: space-around;">
                    <input type="range" class="slider" id="timeAccControl" min="1" max="9" value="1" step="1"
                        style="margin-left: 20px; margin-right: 20px;" onchange="changeTimeAccRate()">

                    <p
                        style="box-shadow: 3px 3px 7px 0 rgba(0, 0, 0, 0.2), -4px -4px 9px 0 rgba(255, 255, 255, 0.55);padding: 7px;border-radius: 10px; color: rgba(59, 59, 59, 0.767);font-size: smaller;">
                        <span id="timeAccRateDisp">1</span> ×
                    </p>
                </div>

            </div>
            <p class="functionTitle">Configure New Flight</p>
            <div class="singleFunctionCell"
                style="display: flex; align-items: center; flex-wrap: wrap;justify-content: space-around;">

                <div
                    style="flex-basis: 100%;display: flex; align-items: center; justify-content: center; margin: 10px;">
                    <div
                        style="display: flex; align-items: center;flex-wrap: wrap; justify-content: center;box-shadow: 3px 3px 7px 0 rgba(0, 0, 0, 0.2), -4px -4px 9px 0 rgba(255, 255, 255, 0.55);border-radius: 20px;margin: 5px;padding: 5px;">
                        <p style="flex-basis: 100%;text-align: center;">Scenario Presets</p>
                        <button class="scenarioPreset"
                            onclick="configScenarioPreset(70000, 45000, 1130, 1130, 45, 500)">Booster Sep</button>
                        <button class="scenarioPreset"
                            onclick="configScenarioPreset(15000, 5000, 330, 430, 30, 200)">RTLS</button>
                        <button class="scenarioPreset"
                            onclick="configScenarioPreset(80000, -1980000, 7300, -30, 30, 50)">Re-entry</button>
                        <button class="scenarioPreset" onclick="configScenarioPreset(1000, -100, 0, -70, 90, 30)">Before
                            Flip</button>
                        <button class="scenarioPreset" onclick="configScenarioPreset(200, 0, 0, -35, 0, 20)">Landing
                            Burn</button>
                    </div>
                </div>

                <input type="number" id="Altitude" placeholder="Altitude (M)">
                <input type="number" id="X-Position" placeholder="X-Position (M)">
                <input type="number" id="Speed-X" placeholder="Speed-X (M/S)">
                <input type="number" id="Speed-Y" placeholder="Speed-Y (M/S)">
                <input type="number" id="Pitch" placeholder="Pitch (°)">
                <input type="number" id="Propellent" placeholder="Propellent (T)">


                <div
                    style="flex-basis: 100%;display: flex; align-items: center; justify-content: center; margin: 10px;">
                    <div
                        style="display: flex; align-items: center; justify-content: center;box-shadow: inset 1.5px 1.5px 3.5px 0 rgba(0, 0, 0, 0.2), inset -2px -2px 4.5px 0 rgba(255, 255, 255, 0.55);border-radius: 20px;margin: 5px;padding: 5px;">
                        <button
                            style="background-color: transparent; padding: 10px;border-radius: 20px; margin: 15px;" onclick="clearScenarioPreset()">Clear</button>
                        <button id="setUpNewFlight"
                            style="background-color: transparent; padding: 10px;border-radius: 20px; margin: 15px;"
                            onclick="configureNewFlight()">Configure</button>
                    </div>
                </div>

            </div>
        </div>

    </div>
</body>


<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.3/pixi.min.js"></script>
<script src="render/particleEffect/revoltfx.min.js"></script>

<script type="text/javascript" src="utilities/tools.js"></script>

<script type="text/javascript" src="backend/utilities/tools.js"></script>
<script type="text/javascript" src="backend/utilities/plotting.js"></script>
<script type="text/javascript" src="backend/utilities/switches.js"></script>

<script type="text/javascript" src="backend/physics.js"></script>
<script type="text/javascript" src="backend/updateBackEnd.js"></script>

<script type="text/javascript" src="backend/flightcontrol/flightControl.js"></script>
<script type="text/javascript" src="backend/flightcontrol/autoPilotLowLevelFunctions.js"></script>
<script type="text/javascript" src="backend/flightcontrol/autoPilotModes.js"></script>
<script type="text/javascript" src="backend/initBackEnd.js"></script>

<script type="text/javascript" src="render/initGroundObjects.js"></script>
<script type="text/javascript" src="displayComponents/dispUpdate.js"></script>
<script type="text/javascript" src="render/drawMethods/drawMethods.js"></script>
<script type="text/javascript" src="render/drawMethods/initDrawMethods.js"></script>
<script type="text/javascript" src="render/pixi_setup.js"></script>

<script type="text/javascript" src="render/pixi_init.js"></script>

<script type="text/javascript" src="utilities/eventListener.js"></script>

<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>

</html>